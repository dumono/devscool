version: '3.8'
services:
    cont-build:
        build: build-app
        volumes:
            - "mytarget:/work/boxfuse-sample-java-war-hello/target"

    myapp:
        image: tomee:8-jre-8.0.4-microprofile
        volumes:
            - "mytarget:/usr/local/tomee/webapps"
        ports:
            - "8080:8080"
        depends_on:
            - cont-build
volumes:
    mytarget:
        driver: local
        driver_opts:
            type: 'none'
            o: 'bind'
            device: './target'
